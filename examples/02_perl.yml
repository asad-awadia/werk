version: "1"

variables:
  PERL_CPANM_OPT: "--notest --quiet"

jobs:
  deps:
    executor: shell
    commands:
      - cpanm --installdeps .

  quality:
    executor: shell
    needs:
      - test
      - lint

  lint:
    executor: shell
    commands:
      - perlcritic lib t

  test:
    executor: shell
    commands:
      - prove -lr
